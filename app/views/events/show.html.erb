<center>
<h1><%= @event.name %></h1>
<p><%= @event.country %>, <%= format_date(@event.date) %></p>
<p>Created by <%= link_to @creator.username, user_path(@creator) %></p>
<p>Summary: <%= @event.description %></p>

<% if current_user %>
  <%= link_to 'Add Your Memory of This Event', new_event_memory_path(@event), method: :get %>
  <% if current_user.id == @creator.id || current_user.admin? %>
    <%= link_to 'Edit', edit_event_path(@event), method: :get %>
    <%= link_to 'Delete', event_path(@event), method: :delete %>
  <% end %><br>
<% else %>
  <%= link_to 'Add a Memory of This Event', new_user_session_path %>
<% end %><br>

<% if !@event&.memories.empty? %>
  <h2>Memories</h2>
  <table>
    <thead>
      <th>Title</th><th>Writer</th>
    </thead>
    <tbody>
      <% @event.memories.each do |m| %>
        <tr>
          <td><%= link_to m.title, memory_path(m) %></td>
          <td><%= link_to m.user.username, user_path(m.user)  %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
<center>
